<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Certificate / Additional Insured / Loss Payee Request — Charity One</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">

  <!-- Use existing shared stylesheet -->
  <link rel="stylesheet" href="style.css" />

</head>
<body>
  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="header-inner">
      <img src="charity_one_logo.png" alt="Charity One Logo" class="logo" onerror="this.style.display='none'"/>
    </div>
  </header>

  <div class="divider-white" aria-hidden="true"></div>
  <div class="divider-grey" aria-hidden="true"></div>

  <div class="header-bottom">
    <div class="subtitle"></div>
  </div>

  <div class="form-title">
    <h1 class="title">Certificate, Additional Insured, or Loss Payee Request</h1>
  </div>
  <!-- Header -->

  <main class="container" role="main">
    <div class="card" aria-live="polite">
      <form id="certAiForm" class="form" novalidate>

        <!-- Intro / E&O safe -->
        <div>
          <p class="intro">Use this form to request a Certificate of Insurance, add an Additional Insured, or request a Loss Payee. Select the request type below to see the specific fields required.</p>
        </div>

        <!-- SECTION A: Organization Name -->
        <div class="section" id="sec-org">
          <div class="section-title"><span class="q-number">1.</span>Organization Name <span class="required-star">*</span></div>
          <input id="orgName" name="orgName" class="answer" type="text" placeholder="Legal or operating name" required aria-required="true" />
        </div>

        <!-- 2 Request Type -->
        <div class="section" id="sec-request-type">
          <div class="section-title"><span class="q-number">2.</span>Request Type <span class="required-star">*</span></div>
          <div class="choice-group" role="radiogroup" aria-labelledby="sec-request-type">
            <label class="choice-item"><input type="radio" name="requestType" value="certificate_only" required aria-required="true"/> Proof of Coverage</label>
            <label class="choice-item"><input type="radio" name="requestType" value="certificate_ai" required aria-required="true"/> Certificate + Additional Insured</label>
            <label class="choice-item"><input type="radio" name="requestType" value="loss_payee" required aria-required="true"/> Loss Payee Request</label>
          </div>
        </div>

        <div id="reqCard" class="vehicle-card hidden">

              <!-- Explanation blocks -->
              <p id="exPlain_cert_only" class="intro hidden">Based on your selection, we will issue a standard certificate of insurance showing policy limits and dates only, and it will not include any additional insureds.</p>

              <p id="exPlain_ai" class="intro hidden">
                Additional Insured status ensures the certificate holder is added to your policy as required by contract. Selecting this option adds the contractor to your policy and allows them to share your liability limits. Please make sure your policy has adequate limits in the event of a claim.
              </p>

              <p id="exPlain_loss" class="intro hidden">
                A Loss Payee ensures your lender or finance company receives claim proceeds in case of damage.
              </p>

              <!-- SECTION B: Purpose of Request (shown for certificate only & certificate+AI) -->
              <div class="section hidden" id="secPurpose">
                <div class="section-title">Purpose of Request</div>
                <select id="purposeSelect" name="purposeSelect" class="answer" aria-describedby="purposeHelp">
                  <option value="">— Select purpose —</option>
                  <option>Event Venue</option>
                  <option>Grant Requirement</option>
                  <option>Contract Requirement</option>
                  <option>Equipment Lease</option>
                  <option>Building Lease / Property Use / Landlord Requirement</option>
                  <option value="other">Other</option>
                </select>
                <div id="purposeOtherWrapper" class="hidden" style="margin-top:8px;">
                  <input id="purposeOther" name="purposeOther" class="answer" type="text" placeholder="Please describe the 'Other' purpose" required aria-required="true"/>
                </div>
                <div id="purposeHelp" class="intro" style="margin-top:8px;">If you select "Other" please provide details.</div>
              </div>

              <!-- 4 Additional Insured Section (conditional) -->
              <!-- <div class="section hidden" id="secAdditionalInsured" data-for="certificate_ai">
                <div class="section-title">Additional Insured — Legal entity to be added</div>
                <input id="aiLegalName" name="aiLegalName" class="answer" type="text" placeholder="Legal name of organization" />
                <div class="intro" style="margin-top:8px;">Legal Name of Organization to Be Added as Additional Insured</div>
              </div> -->

              <!-- 5 Certificate Holder Information (shown for Certificate Only & Certificate+AI) -->
              <div class="section hidden" id="secCertificateHolder" data-roles="certificate_only,certificate_ai">
                <div class="section-title">Certificate Holder Information</div>
                <input id="holderName" name="holderName" class="answer" type="text" placeholder="Certificate Holder Name" />
                <div style="height:8px"></div>
                <textarea id="holderAddress" name="holderAddress" class="answer" placeholder="Mailing address"></textarea>
                <div style="height:8px"></div>
                <textarea id="holderDetails" name="holderDetails" class="answer" placeholder="Additional details (optional)"></textarea>
              </div>

              <!-- 6 Loss Payee Section (conditional) -->
              <div class="section hidden" id="ecLossPayee" data-for="loss_payee">
                <div class="section-title">Loss Payee Information</div>
                <input id="lpName" name="lpName" class="answer" type="text" placeholder="Lender or Finance Company Name" />
                <div style="height:8px"></div>
                <textarea id="lpAddress" name="lpAddress" class="answer" placeholder="Lender mailing address or instructions (single field)"></textarea>
                <div style="height:8px"></div>
                <textarea id="lpDetails" name="lpDetails" class="answer" placeholder="Additional details (optional)"></textarea>
              </div>
        </div>

        <!-- Insurance Requirements Upload Logic -->
        <!-- <div class="section" id="secRequirementsCheck">
          <div class="section-title">
            <span class="q-number">3.</span>
            Do you have a copy of your insurance requirements? <span class="required-star">*</span>
          </div>

          <div class="choice-group">
            <label class="choice-item">
              <input type="radio" name="hasRequirements" value="yes" required>
              Yes
            </label>
            <label class="choice-item">
              <input type="radio" name="hasRequirements" value="no" required>
              No
            </label>
          </div>
        </div> -->

        <!-- Insurance Requirement Upload Logic 2 -->
        <div class="section" id="secInsuranceReq">
            <div class="section-title">
              <span class="q-number">3.</span>
              Do you have a copy of your insurance requirements? <span class="required-star">*</span>
            </div>

            <select id="insuranceReqSelect" class="answer" required>
              <option value="">— Select —</option>
              <option value="upload_now">Yes, I can upload now</option>
              <option value="email_later">Yes, but I do not have them readily available</option>
              <option value="not_received">No, I did not receive insurance requirements</option>
            </select>

            <!-- Upload appears ONLY when "upload_now" -->
            <div id="insuranceUploadWrapper" class="hidden" style="margin-top:10px;">
              <input id="insuranceUpload" type="file" class="answer" multiple>
            </div>

            <!-- Message when "email_later" -->
            <p id="emailLaterMsg" class="intro hidden">
              Please email the insurance requirements to
              <strong>certificates@charityoneinsurance.com</strong> as soon as possible to avoid processing delays.
            </p>

            <!-- Message when "not_received" -->
            <p id="notReceivedMsg" class="intro hidden">
              We recommend that you obtain a copy of any insurance requirements to ensure that you are in compliance with your contractual agreement.
            </p>
        </div>

        <!-- Conditional Upload Section -->
        <div class="section hidden" id="secRequirementsUpload">
          <div class="section-title">
            Upload Insurance Requirements <span class="required-star">*</span>
          </div>

          <input
            id="requirementsUpload"
            name="requirementsUpload"
            class="answer"
            type="file"
            multiple
            accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
          />

          <div class="intro" style="margin-top:8px;">
            Please upload your insurance requirements. This is mandatory if you selected "Yes".
          </div>
        </div>

        <!-- Email Adress -->
        <div class="section" id="sec-delivery">
          <div class="section-title"><span class="q-number">4.</span>Email Address for Certificate Delivery <span class="required-star">*</span></div>
          <input id="deliveryEmail" name="deliveryEmail" class="answer" type="email" placeholder="email@example.org" required aria-required="true"/>
        </div>

        <!-- Optional Portal Upload Link -->
        <div class="section" id="secPortalLink">
          <div class="section-title">
            <span class="q-number">5.</span>Provide a link below if you would like us to upload a certificate to a portal (optional)
          </div>

          <input
            id="portalUploadLink"
            name="portalUploadLink"
            class="answer"
            type="url"
            placeholder="https://portal.example.com/upload"
          />

          <div class="intro" style="margin-top:8px;">
            If applicable, provide the portal link where the certificate should be uploaded.
          </div>
        </div>

        <!-- SECTION D — SUBMIT -->
        <!-- <div class="section" id="sec-submit"> -->
          <div class="actions">
            <div class="muted-small">
            Fields marked <span class="required-star">*</span> are required
            </div>
            <div style="display:flex; gap:10px;">
              <button id="previewBtn" type="button" class="btn secondary">Preview</button>
              <button id="submitBtn" class="btn" type="submit">Submit</button>
            </div>
          </div>
        <!-- </div> -->

        <div id="statusMsg" class="message hidden" aria-hidden="true" style="margin-top:12px;"></div>
      </form>
    </div>
  </main>

  <!-- Preview Modal-->
  <div id="previewModal" class="preview-modal hidden" role="dialog" aria-modal="true" aria-labelledby="previewTitle">
    <div class="preview-dialog" role="document">
      <header class="preview-header">
        <h3 id="previewTitle">Preview your request</h3>
        <button id="closePreview" class="preview-close" aria-label="Close preview">&times;</button>
      </header>
      <div class="preview-body" id="previewBody"></div>
      <footer class="preview-footer">
        <button id="editBtn" class="btn secondary">Back / Edit</button>
        <button id="confirmSubmitBtn" class="btn">Confirm & Submit</button>
      </footer>
    </div>
  </div>

  <script src="script.js"></script>

</body>
</html>